import{a as z,b as B,e as A,g as F,h as Q,j as R}from"./chunk-6M3OYAIA.js";import{a as D}from"./chunk-TQHVSWNO.js";import{a as W,b as N}from"./chunk-MH4W7LBN.js";import{D as _,F as l,H as n,I as e,J as x,M as b,N as p,O as d,P as y,Q as i,R as c,S as C,U as M,V as v,W as S,Y as w,_ as P,ha as O,ia as L,ka as E,oa as I,p as h,t as u,ta as V,u as g,wa as T,y as o,z as k}from"./chunk-6UB5JURL.js";var H=a=>["/stocks",a];function Y(a,f){if(a&1){let t=b();n(0,"div",9)(1,"div",10)(2,"span",11),i(3),e(),n(4,"span",12),i(5),e()(),n(6,"div",13)(7,"div"),i(8,"Open Rate:"),e(),n(9,"div"),i(10,"Close Rate:"),e(),n(11,"div"),i(12,"Peak Price:"),e(),n(13,"div"),i(14,"Low Price:"),e(),n(15,"div"),i(16,"Current Rate:"),e(),n(17,"div"),i(18,"Year Low:"),e(),n(19,"div"),i(20,"Year High:"),e(),n(21,"div"),i(22),e(),n(23,"div"),i(24),e(),n(25,"div"),i(26),e(),n(27,"div"),i(28),e(),n(29,"div"),i(30),e(),n(31,"div"),i(32),e(),n(33,"div"),i(34),e()(),n(35,"div",14)(36,"a",15)(37,"button",16),i(38,"Details"),e()(),n(39,"button",17),p("click",function(){let r=u(t).$implicit,m=d();return g(m.openBuyModal(r))}),i(40,"Buy"),e(),n(41,"button",18),p("click",function(){let r=u(t).$implicit,m=d();return g(m.addToWatchlist(r.id))}),i(42,"Watch"),e()()()}if(a&2){let t=f.$implicit;o(3),c(t.symbol),o(2),c(t.name),o(17),c(t.openRate),o(2),c(t.closeRate),o(2),c(t.peakPrice),o(2),c(t.lowPrice),o(2),c(t.currentRate),o(2),c(t.yearLow),o(2),c(t.yearHigh),o(2),l("routerLink",P(10,H,t.id))}}function $(a,f){a&1&&(n(0,"div",19)(1,"span",20),i(2,"info"),e(),i(3," No stocks found. "),e())}function q(a,f){if(a&1){let t=b();n(0,"div",21),p("click",function(){u(t);let r=d();return g(r.closeBuyModal())}),e()}}function G(a,f){if(a&1&&(n(0,"div",28),i(1),e()),a&2){let t=d(2);o(),c(t.buyMessage)}}function J(a,f){if(a&1){let t=b();n(0,"div",22)(1,"h3"),i(2),e(),n(3,"label"),i(4," Quantity: "),n(5,"input",23),S("ngModelChange",function(r){u(t);let m=d();return v(m.buyQuantity,r)||(m.buyQuantity=r),g(r)}),e()(),n(6,"div",24)(7,"button",25),p("click",function(){u(t);let r=d();return g(r.confirmBuy())}),i(8,"Confirm"),e(),n(9,"button",26),p("click",function(){u(t);let r=d();return g(r.closeBuyModal())}),i(10,"Cancel"),e()(),_(11,G,2,1,"div",27),e()}if(a&2){let t=d();o(2),C("Buy ",t.selectedStock==null?null:t.selectedStock.symbol,""),o(3),M("ngModel",t.buyQuantity),o(2),l("disabled",t.buyLoading||t.buyQuantity<1),o(4),l("ngIf",t.buyMessage)}}var ct=(()=>{class a{constructor(t,s){this.stockService=t,this.watchlistService=s,this.stocks=[],this.filteredStocks=[],this.newStock={},this.showBuyModal=!1,this.buyQuantity=1,this.buyLoading=!1,this.buyMessage="",this.alertMessage=""}ngOnInit(){this.loadStocks()}loadStocks(){this.stockService.getStocks().subscribe(t=>{this.stocks=t,this.filteredStocks=t})}filterStocks(t){this.filteredStocks=this.stocks.filter(s=>s.symbol.toLowerCase().includes(t.toLowerCase())||s.name.toLowerCase().includes(t.toLowerCase()))}addStock(){this.newStock.symbol&&this.newStock.name&&this.stockService.createStock(this.newStock).subscribe(t=>{this.stocks.push(t),this.filteredStocks=[...this.stocks],this.newStock={}})}showAlert(t){this.alertMessage=t,setTimeout(()=>this.alertMessage="",2500)}addToWatchlist(t){if(!this.isLoggedIn()){this.showAlert("Please log in to add to your watchlist.");return}this.watchlistService.addToWatchlist(t).subscribe({next:()=>this.showAlert("Added to watchlist!"),error:s=>this.showAlert(s.error?.message||"Could not add to watchlist.")})}openBuyModal(t){if(!this.isLoggedIn()){this.showAlert("Please log in to buy shares.");return}this.selectedStock=t,this.showBuyModal=!0,this.buyQuantity=1,this.buyMessage=""}closeBuyModal(){this.showBuyModal=!1,this.buyMessage=""}confirmBuy(){!this.selectedStock||this.buyQuantity<1||(this.buyLoading=!0,this.buyMessage="",this.stockService.buyShare(this.selectedStock.id,this.buyQuantity).subscribe({next:()=>{this.buyMessage="Successfully bought!",this.buyLoading=!1,setTimeout(()=>this.closeBuyModal(),1e3)},error:t=>{this.buyMessage=t.error?.message||"Could not buy share.",this.buyLoading=!1}}))}isLoggedIn(){return!!localStorage.getItem("token")}static{this.\u0275fac=function(s){return new(s||a)(k(N),k(D))}}static{this.\u0275cmp=h({type:a,selectors:[["app-stock-list"]],standalone:!0,features:[w],decls:11,vars:5,consts:[["filterInput",""],[1,"stock-section"],["type","text","placeholder","Filter stocks...",2,"margin-bottom","1rem",3,"input"],[1,"stock-list-vertical"],["class","stock-card-vertical",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","buy-modal",4,"ngIf"],["type","error",3,"message"],[1,"stock-card-vertical"],[1,"stock-header"],[1,"stock-symbol"],[1,"stock-name"],[1,"stock-facts"],[1,"stock-actions"],[3,"routerLink"],[1,"details-btn"],[1,"buy-btn",3,"click"],[1,"watch-btn",3,"click"],[1,"empty-state"],[1,"material-icons"],[1,"modal-backdrop",3,"click"],[1,"buy-modal"],["type","number","min","1",3,"ngModelChange","ngModel"],[1,"modal-actions"],[3,"click","disabled"],[3,"click"],["class","buy-message",4,"ngIf"],[1,"buy-message"]],template:function(s,r){if(s&1){let m=b();n(0,"section",1)(1,"h2"),i(2,"Stocks"),e(),n(3,"input",2,0),p("input",function(){u(m);let j=y(4);return g(r.filterStocks(j.value))}),e(),n(5,"div",3),_(6,Y,43,12,"div",4)(7,$,4,0,"div",5),e()(),_(8,q,1,0,"div",6)(9,J,12,4,"div",7),x(10,"app-alert",8)}s&2&&(o(6),l("ngForOf",r.filteredStocks),o(),l("ngIf",r.filteredStocks.length===0),o(),l("ngIf",r.showBuyModal),o(),l("ngIf",r.showBuyModal),o(),l("message",r.alertMessage))},dependencies:[E,O,L,I,R,z,F,B,Q,A,T,V,W],styles:[".stock-section[_ngcontent-%COMP%]{max-width:1100px;margin:2rem auto;background:#fff;border-radius:1rem;box-shadow:0 4px 24px #00000012;padding:2rem}.stock-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;color:#3f51b5;font-size:2rem;font-weight:600}.stock-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1.5rem}.stock-list-vertical[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.stock-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.2rem;background:#f5f6fa;border-radius:.75rem;padding:1.2rem 1rem;box-shadow:0 1px 4px #00000008;transition:box-shadow .2s}.stock-card-vertical[_ngcontent-%COMP%]{background:#f5f6fa;border-radius:1rem;box-shadow:0 2px 8px #3f51b514;padding:1.2rem 1rem;display:flex;flex-direction:column;gap:.7rem;min-width:0}.stock-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #3f51b51a}.stock-header[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:#3f51b5;margin-bottom:.3rem;display:flex;gap:1.2rem;align-items:center}.stock-icon[_ngcontent-%COMP%]{background:#e3eafc;border-radius:50%;padding:.7rem;display:flex;align-items:center;justify-content:center}.stock-icon[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:#3f51b5;font-size:2rem}.stock-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.2rem}.stock-symbol[_ngcontent-%COMP%]{font-weight:700;color:#3f51b5;font-size:1.1rem}.stock-symbol[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500;background:#e3eafc;color:#283593;border-radius:.5rem;padding:.2rem .7rem;margin-right:.7rem}.stock-name[_ngcontent-%COMP%]{color:#333;font-size:1rem}.stock-facts[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:.5rem 1.2rem;font-size:1rem;color:#444;margin-bottom:.5rem;text-align:center;white-space:normal;overflow-x:unset}.stock-facts[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(-n+7){font-weight:700;color:#3f51b5;border-bottom:1px solid #e0e0e0;padding-bottom:.2rem}.stock-actions[_ngcontent-%COMP%]{margin-top:.7rem;display:flex;gap:.7rem}.details-btn[_ngcontent-%COMP%], .buy-btn[_ngcontent-%COMP%], .watch-btn[_ngcontent-%COMP%]{background:#3f51b5;color:#fff;border:none;border-radius:.5rem;padding:.5rem 1rem;font-size:1rem;cursor:pointer;transition:background .2s}.details-btn[_ngcontent-%COMP%]:hover, .buy-btn[_ngcontent-%COMP%]:hover, .watch-btn[_ngcontent-%COMP%]:hover{background:#283593}.empty-state[_ngcontent-%COMP%]{grid-column:1/-1;text-align:center;color:#aaa;margin-top:2rem;font-size:1.1rem;display:flex;flex-direction:column;align-items:center;gap:.5rem}form[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:1rem}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem .8rem;border-radius:.4rem;border:1px solid #cfd8dc;font-size:1rem}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#3f51b5;color:#fff;border:none;cursor:pointer;transition:background .2s}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#283593}input[type=text][_ngcontent-%COMP%]{width:100%;margin-bottom:1rem;border:1px solid #cfd8dc;border-radius:.4rem;padding:.5rem .8rem;font-size:1rem}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#28359326;z-index:1000;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.buy-modal[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:1.2rem;box-shadow:0 8px 32px #2835932e;padding:2.2rem 2rem 1.5rem;z-index:1001;min-width:320px;max-width:95vw;display:flex;flex-direction:column;gap:1.2rem;animation:_ngcontent-%COMP%_fadeInModal .2s}@keyframes _ngcontent-%COMP%_fadeInModal{0%{opacity:0;transform:translate(-50%,-60%)}to{opacity:1;transform:translate(-50%,-50%)}}.buy-modal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1.4rem;color:#3f51b5;font-weight:600;letter-spacing:1px}.buy-modal[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.1rem;color:#333;margin-bottom:.5rem;display:flex;align-items:center;gap:.7rem}.buy-modal[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:90px;padding:.5rem;margin-left:.5rem;border-radius:.4rem;border:1px solid #cfd8dc;font-size:1.1rem;background:#f5f6fa;transition:border .2s}.buy-modal[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus{border-color:#3f51b5;background:#e3eafc;outline:none}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:.5rem}.buy-modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#3f51b5;color:#fff;border:none;border-radius:.5rem;padding:.6rem 1.3rem;font-size:1.05rem;font-weight:500;cursor:pointer;transition:background .2s}.buy-modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#283593}.buy-modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#b0b8d8;cursor:not-allowed}.buy-message[_ngcontent-%COMP%]{color:#388e3c;margin-top:.5rem;font-weight:500;text-align:center}@media (max-width: 900px){.stock-section[_ngcontent-%COMP%]{padding:1rem .3rem;max-width:100vw}.stock-card-vertical[_ngcontent-%COMP%]{padding:.7rem .5rem}.stock-facts[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;text-align:left}}"]})}}return a})();export{ct as a};
